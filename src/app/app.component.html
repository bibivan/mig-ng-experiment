<div class="body">
    <app-header></app-header>

    <ng-container *ngIf="!state || !state.isInit; else form">
        <div class="preloader">
            <app-preloader></app-preloader>
        </div>
    </ng-container>

    <ng-template #form>
        <div [ngSwitch]="state.page">
            <app-step-preloader *ngSwitchCase="'preloader'"></app-step-preloader>

            <app-anketa *ngSwitchCase="'anketa'"
                        [order]="state.order"
            ></app-anketa>

            <app-sms *ngSwitchCase="'sms'"
                     [order]="state.order"
                     [smsSettings]="state.anketaSMS"
            ></app-sms>

            <app-passport *ngSwitchCase="'passport'"
                          [order]="state.order"
            ></app-passport>

            <app-employment-and-income *ngSwitchCase="'employment_and_income'"
                                       [order]="state.order"
            ></app-employment-and-income>

            <app-additional-contact *ngSwitchCase="'additional_contact'"
                                    [order]="state.order"
            ></app-additional-contact>

            <app-products *ngSwitchCase="'products'"
                          [order]="state.order"
            ></app-products>

            <app-contract *ngSwitchCase="'contract'"></app-contract>

            <app-final *ngSwitchCase="'final'"
                       [order]="state.order"
            ></app-final>
        </div>

        <app-toast *ngIf="state.isOpenToastAnketaSMS" caption="Введите код из SMS">
            Мы отправили код вам на номер
            <span class="nobr">{{ state.order.mobilePhone | mobilePhone }}</span>
        </app-toast>

        <app-modal *ngIf="state.isOpenPersonalAccountHint" [small]="true" [bottomMobile]="true">
            <app-personal-account-hint (clickedButton)="closePersonalAccountHint()"></app-personal-account-hint>
        </app-modal>
    </ng-template>
</div>



