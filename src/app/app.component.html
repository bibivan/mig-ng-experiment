<div class="body">
    <app-header></app-header>

    <ng-container *ngIf="!state || !state.isInit; else form">
        <div class="preloader">
            <app-preloader></app-preloader>
        </div>
    </ng-container>

    <ng-template #form>
        <div [ngSwitch]="state.page">
            <app-step-preloader *ngSwitchCase="'preloader'"
                                [order]="state.order"
                                [preloaderRequest]="state.preloaderRequest"
            ></app-step-preloader>

            <app-anketa *ngSwitchCase="'anketa'"
                        [order]="state.order"
            ></app-anketa>

            <app-sms *ngSwitchCase="'sms'"
                     [order]="state.order"
                     [smsSettings]="state.anketaSMS"
            ></app-sms>

            <app-passport *ngSwitchCase="'passport'"
                          [order]="state.order"
            ></app-passport>

            <app-employment-and-income *ngSwitchCase="'employment_and_income'"
                                       [order]="state.order"
            ></app-employment-and-income>

            <app-additional-contact *ngSwitchCase="'additional_contact'"
                                    [order]="state.order"
            ></app-additional-contact>

            <app-products *ngSwitchCase="'products'"
                          [order]="state.order"
                          [products]="state.products"
            ></app-products>

            <app-snils *ngSwitchCase="'snils'"
                       [order]="state.order"
            ></app-snils>

            <app-hold-amount *ngSwitchCase="'hold_amount'"></app-hold-amount>

            <app-contract *ngSwitchCase="'contract'"
                          [order]="state.order"
                          [contract]="state.contract"
                          [sms]="state.contractSMS"
            ></app-contract>

            <app-final *ngSwitchCase="'final'"
                       [order]="state.order"
                       [status]="state.status"
            ></app-final>
        </div>

        <app-toast *ngIf="state.toast?.isOpen" [caption]="state.toast.caption">
            <div [innerHTML]="state.toast.text"></div>
        </app-toast>

        <app-modal *ngIf="state.openModal === 'personal_account'" [small]="true" [bottomMobile]="true">
            <app-personal-account-hint (clickedButton)="closeModal()"></app-personal-account-hint>
        </app-modal>

        <app-modal *ngIf="state.openModal === 'insurance_term'" [small]="true" [bottomMobile]="true">
            <app-insurance-term-hint (clickedButton)="closeModal()"></app-insurance-term-hint>
        </app-modal>

        <app-modal *ngIf="state.openModal === 'insurance_info'" [small]="true" [bottomMobile]="true">
            <app-insurance-info-hint (clickedButton)="closeModal()"></app-insurance-info-hint>
        </app-modal>

        <app-modal *ngIf="state.openModal === 'sum_loan'" [small]="true" [bottomMobile]="true">
            <app-sum-loan-hint (clickedButton)="closeModal()"></app-sum-loan-hint>
        </app-modal>

        <app-modal *ngIf="state.openModal === 'refusal_loan'" [small]="true" [bottomMobile]="true">
            <app-refusal-loan></app-refusal-loan>
        </app-modal>
    </ng-template>
</div>



