<div class="calculator">
    <app-preloader *ngIf="!state || state?.isLoading; else calculator;"
                   [fullscreen]="false"
    ></app-preloader>

    <ng-template #calculator>
        <div class="field">
            <app-input placeholder="Вы берете"
                       [formControl]="sumControl"
                       mask="currency"
                       [currencyPrecision]="0"
                       [inputSlider]="true"
                       (blurEvent)="onChangeSumControl()"
            ></app-input>
            <div class="slider-wrapper">
                <mat-slider [min]="state.sumMin"
                            [max]="state.sumMax"
                            [step]="state.sumStep"
                            [value]="state.sum"
                            (input)="onChangeSum($event.value)"
                ></mat-slider>
            </div>
            <p>{{ state.sumMin }}-{{ state.sumMax }}</p>
        </div>

        <div class="field">
            <app-input placeholder="На срок"
                       [formControl]="termControl"
                       mask="currency"
                       [currencyPrecision]="0"
                       [maxlength]="2"
                       [currencyThousands]="''"
                       [currencyMax]="99"
                       [currencySuffix]="state.termSliderLabel"
                       [inputSlider]="true"
                       (blurEvent)="onChangeTermControl()"
            ></app-input>
            <div class="slider-wrapper">
                <mat-slider [min]="state.termMin"
                            [max]="state.termMax"
                            [step]="state.termStep"
                            [value]="state.termSliderValue"
                            (input)="onChangeTerm($event.value)"
                ></mat-slider>
            </div>

            <p>{{ state.termInputValueMin }}-{{ state.termInputValueMax }}</p>
        </div>

        <div class="line"></div>

        <div class="info">
            <div class="item">
                <div class="label">До (включительно)</div>
                <div class="value">{{ state.results?.deadline | date:'d MMMM y' }}</div>
            </div>
            <div class="item">
                <div class="label">
                    <ng-container *ngIf="state.term?.termUnit === 'day'">Возвращаете</ng-container>
                    <ng-container *ngIf="state.term?.termUnit === 'week'">Платеж раз в 2 недели</ng-container>
                </div>
                <div class="value">{{ state.results?.sumReturn | currencyRub }}</div>
            </div>
        </div>
    </ng-template>

</div>



