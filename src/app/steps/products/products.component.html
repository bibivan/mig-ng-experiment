<app-container>
    <app-form-wrapper>
        <h1 class="no-margin-bottom">Выберите сумму</h1>
        <p class="color-gray margin-top-x1">Максимально одобренная для вас сумма
            — {{ maxApprovedAmount | currencyRub }}</p>

        <div class="switchers">
            <div *ngFor="let item of products"
                 class="item"
                 [class.selected]="item.id === selectedProduct.id"
                 (click)="changeProduct(item)"
            >
                <div class="icon"></div>
                <div class="info">
                    <div class="sum">{{ item.Amount | currencyRub }}</div>
                    <div class="text">На карту</div>
                </div>
            </div>
            <div class="mobile-fix-margin"></div>
        </div>

        <div *ngIf="selectedProduct">
            <div class="product">
                <div class="line"></div>
                <div class="row">
                    <div class="col">
                        <div class="text label">Берёте</div>
                    </div>
                    <div class="col">
                        <div class="text">
                            {{ selectedProduct.Amount | currencyRub }}
                            <div class="info" (click)="openSumLoanHint($event)">
                                <app-icon name="info"></app-icon>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="line"></div>
                <div class="row">
                    <div class="col">
                        <div class="text label">Получение</div>
                    </div>
                    <div class="col">
                        <div class="text">
                            Онлайн на карту
                        </div>
                    </div>
                </div>
                <div class="line"></div>
                <div class="row">
                    <div class="col">
                        <div class="text label">Срок займа</div>
                    </div>
                    <div class="col">
                        <div class="text">
                            {{ { value: selectedProduct.Term, termUnit: selectedProduct.TermUnit } | termLoan }}
                        </div>
                    </div>
                </div>
                <div class="line"></div>

                <div class="row">
                    <div class="col">
                        <div class="text label">Платёж</div>
                    </div>
                    <div class="col">
                        <div class="text">
                            {{ getRegularPayment(selectedProduct) | currencyRub }}
                            одним платежом
                        </div>
                    </div>
                </div>

                <ng-container *ngIf="selectedProduct.InsuranceList">
                    <div class="line"></div>
                    <div class="row">
                        <div class="col">
                            <div class="text label">Страхование</div>
                        </div>
                        <div class="col">
                            <div class="text">
                                <ng-container *ngIf="selectedInsurance; else withoutInsurance">Подключено</ng-container>
                                <ng-template #withoutInsurance>
                                    <span class="color-dangerous">Отключено</span>
                                </ng-template>
                                <div class="info"
                                     [class.color-dangerous]="!selectedInsurance"
                                     (click)="openInsuranceInfoHint($event)"
                                >
                                    <app-icon name="info"></app-icon>
                                </div>
                            </div>
                        </div>
                    </div>
                </ng-container>
            </div>

            <div [class.hide]="!getInsurance(selectedProduct)">
                <div class="line margin-bottom-x2"></div>
                <app-input-checkbox [formControl]="insuranceControl">
                    Я согласен на заключение
                    <span class="link" (click)="openInsuranceTermHint($event)">
                        договора страхования
                    </span>
                </app-input-checkbox>
            </div>

            <div class="line margin-bottom-x2"></div>

            <app-button theme="get-money" (clicked)="setProduct()">
                Получить {{ selectedProduct.Amount | currencyRub }}
                на {{ { value: selectedProduct.Term, termUnit: selectedProduct.TermUnit } | termLoan }}
            </app-button>
        </div>

        <p class="text-1 text-align-center margin-top-x3">
            <span class="link" (click)="openRefusalLoanModal($event)">Отказаться от получения займа</span>
        </p>
    </app-form-wrapper>
</app-container>

<!--<app-modal *ngIf="isOpenInsuranceTermModal"-->
<!--           [small]="true"-->
<!--           [bottomMobile]="true"-->
<!--           (closed)="closeInsuranceTermHint()"-->
<!--&gt;-->
<!--    <p class="text-3">-->
<!--        Договор страхования от компании ОАО "Страхование жизни".-->
<!--        Стоимость страхования 900 рублей, срок страхования 3 месяца.-->
<!--        Ознакомится с условиями страхования можно по ссылке-->
<!--        <span class="link" (click)="openLink('https://migcredit.ru/#term-insurance.pdf')">Условия страхования для физических лиц</span> и в-->
<!--        <span class="link" (click)="openLink('https://migcredit.ru/#pamytka-insurance.pdf')">Памятке застрахованному лицу</span>-->
<!--    </p>-->
<!--    <app-button (clicked)="closeInsuranceTermHint()">Понятно</app-button>-->
<!--</app-modal>-->


<!--<app-modal *ngIf="isOpenInsuranceInfoModal"-->
<!--           [small]="true"-->
<!--           [bottomMobile]="true"-->
<!--           (closed)="closeInsuranceTermHint()"-->
<!--&gt;-->
<!--    <div class="text-align-center margin-bottom-x2">-->
<!--        <app-round-icon theme="primary" name="shield"></app-round-icon>-->
<!--        <p class="h1 no-margin-bottom">Страхование</p>-->
<!--        <p class="text-2 color-gray margin-top-x1">-->
<!--            В случае наступления "Страхового случая", страхование поможет вам с выплатой долга.-->
<!--        </p>-->
<!--    </div>-->

<!--    <app-button (clicked)="closeInsuranceInfoHint()">Понятно</app-button>-->
<!--</app-modal>-->
